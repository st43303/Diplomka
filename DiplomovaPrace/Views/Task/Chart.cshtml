@model IEnumerable<DiplomovaPrace.Models.TaskHistory>

@{
    ViewBag.Title = "Sledování úkolů";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Sledování úkolů</h2>


<canvas id="lineChart"></canvas>

@section Scripts{
    <script src="~/Scripts/chartjs.min.js"></script>
    <script type="text/javascript">
        //line
        var ctxL = document.getElementById("lineChart").getContext('2d');
        var arrayCreate = @Html.Raw(Json.Encode(Model.Select(s => s.CreateCount).ToArray()));
        var arrayProgress =@Html.Raw(Json.Encode(Model.Select(s => s.ProgressCount).ToArray()));
        var arrayFinish =@Html.Raw(Json.Encode(Model.Select(s => s.FinishCount).ToArray()));
        var labels=@Html.Raw(Json.Encode(Model.Select(s => s.Date.ToShortDateString()).ToArray()));
        var myLineChart = new Chart(ctxL, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: "Zadáno",
                    data: arrayCreate,
                    backgroundColor: [
                        'rgba(0, 123, 255, .2)',
                    ],
                    borderColor: [
                        'rgba(0, 123, 255, .7)',
                    ],
                    borderWidth: 2
                },
                {
                    label: "Rozpracováno",
                    data: arrayProgress,
                    backgroundColor: [
                        'rgba(224, 168, 0, .2)',
                    ],
                    borderColor: [
                        'rgba(224, 168, 0, .7)',
                    ],
                    borderWidth: 2
                    },
                    {
                        label: "Dokončeno",
                        data: arrayFinish,
                        backgroundColor: [
                            'rgba(40, 167, 69, .2)',
                        ],
                        borderColor: [
                            'rgba(40, 167, 69, .7)',
                        ],
                        borderWidth: 2
                    }

                ]
            },
            options: {
                responsive: true
            }
        });
    </script>
}
